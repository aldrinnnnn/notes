
<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>2.1. Relational Algebra Overview &#8212; Data 101 Course Notes</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'relational_algebra/primitives';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="2.2. Extended RA Operators" href="extended.html" />
    <link rel="prev" title="2. Relational Algebra" href="index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../overview.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/data101-logo.png" class="logo__image only-light" alt="Data 101 Course Notes - Home"/>
    <script>document.write(`<img src="../_static/data101-logo.png" class="logo__image only-dark" alt="Data 101 Course Notes - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../overview.html">
                    Overview
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">SQL</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../SQL/index.html">1. SQL</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../SQL/review.html">1.1. SQL Review</a></li>
<li class="toctree-l2"><a class="reference internal" href="../SQL/strings.html">1.2. String Manipulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../SQL/truncation.html">1.3. Truncating Relations</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Relational Algebra</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">2. Relational Algebra</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">2.1. Relational Algebra Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="extended.html">2.2. Extended RA Operators</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Frelational_algebra/primitives.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/relational_algebra/primitives.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Relational Algebra Overview</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#set-relational-algebra">2.1.1. Set Relational Algebra</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#primitive-ra-operations">2.1.2. Primitive RA Operations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unary-operators-projection-selection-renaming">2.1.3. Unary Operators: Projection, Selection, Renaming</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#examples">2.1.3.1. Examples</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#binary-operators-cartesian-product-union-and-difference">2.1.4. Binary Operators: Cartesian Product, Union, and Difference</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#derived-operations">2.1.5. Derived Operations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#joins">2.1.6. Joins</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bag-relational-algebra">2.1.7. Bag Relational Algebra</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references">2.1.8. References</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="relational-algebra-overview">
<h1><span class="section-number">2.1. </span>Relational Algebra Overview<a class="headerlink" href="#relational-algebra-overview" title="Permalink to this heading">#</a></h1>
<p><strong>Last updated</strong>: September 6, 2024</p>
<p>In the last note, we briefly touched on the relational data model and
introduced some basic SQL syntax in the <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">FROM</span> <span class="pre">WHERE</span></code> format. In
this note, we’ll revisit the relational data model more formally with relational algebra,
which provides the foundation for many data systems, such as SQL.</p>
<section id="set-relational-algebra">
<h2><span class="section-number">2.1.1. </span>Set Relational Algebra<a class="headerlink" href="#set-relational-algebra" title="Permalink to this heading">#</a></h2>
<p>An algebra is a mathematical theory that defines formulaic operations on variables of specific domains, thereby determining mathematical properties in those domains. For example, elementary algebra defines operations on arithmetic variables, linear algebra defines operations on vectors and matrices, and set algebra defines operations on sets. <strong>Relational algebra</strong> algebra defines operations on <strong>relations</strong>.</p>
<p>The relational algebra theory was popularized by Edgar F. Codd’s 1970 work [1] in defining the relational model, which formed the theoretical basis for relational databases and informed the concurrent development of relational database management systems (rDBMSes).</p>
<p>We will introduce relational algebra in the context of <strong>set</strong> relational algebra (set RA). This means we assume that each relation has a <strong>set</strong> of attributes (unordered, no duplicates) and an unordered <strong>set</strong> of tuples (unordered, no duplicates).
At the conclusion of this chapter, we extend our discussion to <strong>bag</strong> RA and why operations on bags are generally preferred in rDBMSes.</p>
</section>
<section id="primitive-ra-operations">
<h2><span class="section-number">2.1.2. </span>Primitive RA Operations<a class="headerlink" href="#primitive-ra-operations" title="Permalink to this heading">#</a></h2>
<p>Relational algebra (RA) has six primitive operators, upon which all other complex operators are formed:</p>
<ol class="arabic simple">
<li><p>Projection</p></li>
<li><p>Selection</p></li>
<li><p>Renaming</p></li>
<li><p>Product</p></li>
<li><p>Union</p></li>
<li><p>Difference</p></li>
</ol>
<p>These operations take as operands one or more input relations and produce an output relation.</p>
</section>
<section id="unary-operators-projection-selection-renaming">
<h2><span class="section-number">2.1.3. </span>Unary Operators: Projection, Selection, Renaming<a class="headerlink" href="#unary-operators-projection-selection-renaming" title="Permalink to this heading">#</a></h2>
<p>We first discuss the three primitive <strong>unary operators</strong>, where each operator <span class="math notranslate nohighlight">\(f\)</span> takes as input one operand relation <span class="math notranslate nohighlight">\(R\)</span> with schema <span class="math notranslate nohighlight">\((B_1, \dots, B_m)\)</span> and outputs an output relation <span class="math notranslate nohighlight">\(f(R)\)</span>. The output relation can be unnamed.</p>
<ol class="arabic">
<li><p><strong>Projection</strong>, <span class="math notranslate nohighlight">\(\pi_{A_1, A_2, \dots, A_n}(R)\)</span>.</p>
<p>The projection operator outputs a relation that contains the tuples of the input relation <span class="math notranslate nohighlight">\(R\)</span>, but restricted to set of attributes <span class="math notranslate nohighlight">\(\{A_1, \dots, A_n\}\)</span>. In other words, the output relation’s attributes <span class="math notranslate nohighlight">\(\{ A_1, \dots, A_n \}\)</span> is a subset of the input relation’s attributes <span class="math notranslate nohighlight">\(\{ B_1, \dots, B_m\}\)</span>, where <span class="math notranslate nohighlight">\(n \leq m\)</span>.</p>
</li>
<li><p><strong>Selection</strong>, <span class="math notranslate nohighlight">\(\sigma_C(R)\)</span>.</p>
<p>The selection operator outputs a relation that contains the tuples of input relation <span class="math notranslate nohighlight">\(R\)</span> that satisfy the row condition <span class="math notranslate nohighlight">\(C\)</span>. The row condition is defined to contain attributes with boolean expressions: <span class="math notranslate nohighlight">\(=\)</span>, <span class="math notranslate nohighlight">\(&gt;\)</span>, <span class="math notranslate nohighlight">\(&lt;\)</span>, <span class="math notranslate nohighlight">\(!=\)</span>, AND (<span class="math notranslate nohighlight">\(\wedge\)</span>), OR (<span class="math notranslate nohighlight">\(\vee\)</span>), NOT (<span class="math notranslate nohighlight">\(!\)</span>), etc. Because selection is a row filter, the input and output schema share the same schema, with set of attributes <span class="math notranslate nohighlight">\(\{B_1, \dots, B_m\}\)</span>.</p>
</li>
<li><p><strong>Renaming</strong>, <span class="math notranslate nohighlight">\(\rho_{S(A_1, \dots, A_m)}(R)\)</span>, equivalently <span class="math notranslate nohighlight">\(\rho_{S(B_{i_1}\rightarrow A_1, \dots, B_{i_n} \rightarrow A_n)}(R)\)</span>.</p>
<p>The renaming operator outputs a relation with the same data as the input relation, but with renamed attributes and/or relation name. The number of attributes, <span class="math notranslate nohighlight">\(m\)</span> therefore stays consistent across the input and output relation, and the data in tuples does not change. We provide two notations above. In the former, we denote the names of the full set of <span class="math notranslate nohighlight">\(m\)</span> attributes in the output relation, including the unchanged attribute names. In the latter, we specify the <span class="math notranslate nohighlight">\(n\)</span> attributes to rename, where input relation attribute <span class="math notranslate nohighlight">\(B_{i_j}\)</span> is renamed to attribute <span class="math notranslate nohighlight">\(A_{j}\)</span>, for <span class="math notranslate nohighlight">\(j = 1, \dots, n\)</span>, and <span class="math notranslate nohighlight">\(n \leq m\)</span>. In both notations above, the output relation name <span class="math notranslate nohighlight">\(S\)</span> is optional.</p>
</li>
</ol>
<p>In terms of a <code class="docutils literal notranslate"><span class="pre">SFW</span></code> SQL query, the selection operator maps to <code class="docutils literal notranslate"><span class="pre">WHERE</span></code>,
the projection operator maps to <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>, and the renaming operator maps
to <code class="docutils literal notranslate"><span class="pre">AS</span></code>.</p>
<section id="examples">
<h3><span class="section-number">2.1.3.1. </span>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">#</a></h3>
<p>Suppose that we have two relations with the following schema:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(titles(title\_id, type, primary\_title, runtime\_minutes)\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(people(person\_id, name, born, died)\)</span></p></li>
</ul>
<ol class="arabic simple">
<li><p><span class="math notranslate nohighlight">\(\pi_{title\_id, primary\_title}(titles)\)</span> outputs a relation with tuples of <span class="math notranslate nohighlight">\(titles\)</span> that are restricted to the attributes <span class="math notranslate nohighlight">\(title\_id\)</span> and <span class="math notranslate nohighlight">\(primary\_title\)</span>. In other words, we “drop” the other attributes <span class="math notranslate nohighlight">\(type\)</span> and <span class="math notranslate nohighlight">\(runtime\_minutes\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(\sigma_{born &gt; 1980}(people)\)</span> outputs a relation with tuples of <span class="math notranslate nohighlight">\(people\)</span> that satisfy the condition where <span class="math notranslate nohighlight">\(born &gt; 1980\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(\rho_{persons(person\_id, name, birth, death)}(people)\)</span> outputs a relation named <span class="math notranslate nohighlight">\(persons\)</span> that has the tuples of <span class="math notranslate nohighlight">\(people\)</span> but renames attributes <span class="math notranslate nohighlight">\(born\)</span> and <span class="math notranslate nohighlight">\(died\)</span> to <span class="math notranslate nohighlight">\(birth\)</span> and <span class="math notranslate nohighlight">\(death, respectively, and keeps \)</span>person_id<span class="math notranslate nohighlight">\( and \)</span>name$ unchanged.</p></li>
<li><p><span class="math notranslate nohighlight">\(\rho_{persons(born \rightarrow birth, died \rightarrow death}(people)\)</span> does the same as the previous example but is more concise.</p></li>
</ol>
</section>
</section>
<section id="binary-operators-cartesian-product-union-and-difference">
<h2><span class="section-number">2.1.4. </span>Binary Operators: Cartesian Product, Union, and Difference<a class="headerlink" href="#binary-operators-cartesian-product-union-and-difference" title="Permalink to this heading">#</a></h2>
<p>We next discuss the remaining three primitive operators, which are all  <strong>binary operators</strong>.
Each binary operator <span class="math notranslate nohighlight">\(f\)</span> takes as input two operand relations <span class="math notranslate nohighlight">\(R_1\)</span> and and <span class="math notranslate nohighlight">\(R_2\)</span> with schemas <span class="math notranslate nohighlight">\((A_1, \dots, A_n)\)</span> and <span class="math notranslate nohighlight">\(B_1, \dots, B_m)\)</span>, respectively, and outputs an unnamed output relation <span class="math notranslate nohighlight">\(f(R_1, R_2)\)</span>.</p>
<ol class="arabic">
<li><p><strong>Product</strong> (or Cross Product, Cartesian Product), <span class="math notranslate nohighlight">\(R_1 \times R_2\)</span>.</p>
<p>The product operator outputs a relation with tuples that associates each tuple in the left operand with
each tuple in the right operand.  The output schema is therefore <span class="math notranslate nohighlight">\((A_1, A_2, \dots, A_n, B_1, B_2, \dots, B_m)\)</span>. Because a relation’s attributes are defined on a set, if <span class="math notranslate nohighlight">\(A_i = B_j\)</span> for attributes <span class="math notranslate nohighlight">\(A_i \in R_1\)</span> and <span class="math notranslate nohighlight">\(B_j \in R_2\)</span>, then the output relation renames attributes <span class="math notranslate nohighlight">\(A_i\)</span> and <span class="math notranslate nohighlight">\(B_j\)</span> to <span class="math notranslate nohighlight">\(R_1.A_i\)</span> and <span class="math notranslate nohighlight">\(R_2.B_j\)</span>, respectively. If <span class="math notranslate nohighlight">\(R_1\)</span> and <span class="math notranslate nohighlight">\(R_2\)</span> have <span class="math notranslate nohighlight">\(n_1\)</span> and <span class="math notranslate nohighlight">\(n_2\)</span> rows, respectively, then the output relation has <span class="math notranslate nohighlight">\(n_1 n_2\)</span> rows.</p>
</li>
<li><p><strong>Union</strong>, <span class="math notranslate nohighlight">\(R_1 \cup R_2\)</span>.</p>
<p>The union operator outputs a relation that has the set union of rows in <span class="math notranslate nohighlight">\(R_1\)</span> and <span class="math notranslate nohighlight">\(R_2\)</span>. In other words, <span class="math notranslate nohighlight">\(R_1 \cup R_2\)</span> contains one of every tuple that is in either <span class="math notranslate nohighlight">\(R_1\)</span> and/or <span class="math notranslate nohighlight">\(R_2\)</span>. For the union to be defined, the two input relations must have the same schema, i.e., <span class="math notranslate nohighlight">\(n = m\)</span> and there exists some distinct mapping <span class="math notranslate nohighlight">\(A_i = B_j\)</span> for <span class="math notranslate nohighlight">\(i = 1, \dots, n, j = 1, \dots, n\)</span>. The output relation therefore also shares the schema <span class="math notranslate nohighlight">\((A_1, \dots, A_n)\)</span>.</p>
</li>
<li><p><strong>Difference</strong>, <span class="math notranslate nohighlight">\( R_1 - R_2\)</span>.</p>
<p>The difference operator outputs a relation that has the set difference of rows in <span class="math notranslate nohighlight">\(R_1\)</span> and <span class="math notranslate nohighlight">\(R_2\)</span>. In other words, <span class="math notranslate nohighlight">\(R_1 - R_2\)</span> contains one of every tuple that is in <span class="math notranslate nohighlight">\(R_1\)</span> but not in <span class="math notranslate nohighlight">\(R_2\)</span> and is the empty relation if no such tuples exist. As with unions, the input relations and output relation must share the same schema.</p>
</li>
</ol>
</section>
<section id="derived-operations">
<h2><span class="section-number">2.1.5. </span>Derived Operations<a class="headerlink" href="#derived-operations" title="Permalink to this heading">#</a></h2>
<p>Other operations can be expressed as derivations of the operations we’ve
listed above.</p>
<p><strong>Intersection</strong>, <span class="math notranslate nohighlight">\(R_1 \cap R_2\)</span>: Defined as the set intersection of rows in <span class="math notranslate nohighlight">\(R_1\)</span> and <span class="math notranslate nohighlight">\(R_2\)</span>. This is a composition of union and difference; we leave the derivation as an exercise for you.</p>
</section>
<section id="joins">
<h2><span class="section-number">2.1.6. </span>Joins<a class="headerlink" href="#joins" title="Permalink to this heading">#</a></h2>
<p>Several joins can be expressed as a special case of Cartesian product and the three unary operators. We assume the same definition of input relations <span class="math notranslate nohighlight">\(R_1, R_2\)</span> as above.</p>
<ol class="arabic">
<li><p><strong>Theta join</strong>, <span class="math notranslate nohighlight">\(R_1 \bowtie_{\theta} R_2\)</span>.</p>
<p>The theta join outputs a relation that joins two relations such that each row satisfies the condition <span class="math notranslate nohighlight">\(\theta\)</span>. It is defined as <span class="math notranslate nohighlight">\(R_1 \bowtie_{\theta} R_2 = \sigma_{\theta}( R_1 \times R_2)\)</span>. Because it is defined with a cross product, the output schema distinguishes common attributes <span class="math notranslate nohighlight">\(A_i\)</span> in <span class="math notranslate nohighlight">\(R_1\)</span> and <span class="math notranslate nohighlight">\(B_j\)</span> in <span class="math notranslate nohighlight">\(R_2\)</span> as <span class="math notranslate nohighlight">\(R_1.A_i\)</span> and <span class="math notranslate nohighlight">\(R_2.B_j\)</span>, respectively.</p>
</li>
<li><p><strong>Equi join</strong>.</p>
<p>The equi join is a special case of the theta join, where <span class="math notranslate nohighlight">\(\theta\)</span> is an “equality condition,” i.e., contains only boolean expressions involving equality (<span class="math notranslate nohighlight">\(=\)</span>) and logical AND (<span class="math notranslate nohighlight">\(\wedge\)</span>).</p>
</li>
<li><p><strong>Natural join</strong>, <span class="math notranslate nohighlight">\(R_1 \bowtie R_2\)</span>.</p>
<p>The natural join outputs a relation that joins the two input relations <span class="math notranslate nohighlight">\(R_1\)</span> and <span class="math notranslate nohighlight">\(R_2\)</span> such that rows are matched on common attributes and removes duplicate attributes in the output relation schema:</p>
<ol class="arabic simple">
<li><p>Cross product of <span class="math notranslate nohighlight">\(R_1\)</span> and <span class="math notranslate nohighlight">\(R_2\)</span>.</p></li>
<li><p>Selection with equality condition <span class="math notranslate nohighlight">\(\theta\)</span>, where <span class="math notranslate nohighlight">\(\theta\)</span> filters out rows for which shared attributes do <em>not</em> have matching values. In other words, <em>for each</em> attribute pair <span class="math notranslate nohighlight">\(R_1.A_i, R_2.B_j\)</span> where <span class="math notranslate nohighlight">\(A_i\)</span> in <span class="math notranslate nohighlight">\(R_1\)</span> and <span class="math notranslate nohighlight">\(B_j\)</span> in <span class="math notranslate nohighlight">\(R_2\)</span> have the same attribute name (“common attributes”), only keep the tuple if its values for <span class="math notranslate nohighlight">\(R_1.A_i\)</span> and <span class="math notranslate nohighlight">\(R_2.B_j\)</span> match.</p></li>
<li><p>Rename one set of common attributes back to their original name, e.g., <span class="math notranslate nohighlight">\(R_1.A_i\)</span> is renamed to <span class="math notranslate nohighlight">\(A_i\)</span> for each <span class="math notranslate nohighlight">\(A_i = B_j\)</span>.</p></li>
<li><p>Drop the other set of common attributes, e.g., drop <span class="math notranslate nohighlight">\(R_2.B_j\)</span>.</p></li>
</ol>
</li>
</ol>
<p>Here, it is easier to illustrate the natural join with an example. Suppose we have the two relations:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(crew(tid, pid, c, j)\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(people(pid, n, b, d)\)</span></p></li>
</ul>
<p>The natural join of crew and people would then satisfy:</p>
<p><span class="math notranslate nohighlight">\(crew \bowtie people = \pi_{tid, pid, c, j, n, b, d}\bigl(\rho_{crew.pid \rightarrow pid} \bigl( \sigma_{crew.pid = people.pid} (crew \times people) \bigr) \bigr)\)</span>.</p>
<p>In special cases, the natural join reduces to other operators. Suppose we have the three relations <span class="math notranslate nohighlight">\(R(A, B), S(A, B), T(C, D)\)</span>. Then <span class="math notranslate nohighlight">\(R \bowtie S = R \cup S\)</span>, and <span class="math notranslate nohighlight">\(R \bowtie T = R \times T\)</span>.</p>
</section>
<section id="bag-relational-algebra">
<h2><span class="section-number">2.1.7. </span>Bag Relational Algebra<a class="headerlink" href="#bag-relational-algebra" title="Permalink to this heading">#</a></h2>
<p>Relational Algebra provides a common set of operations that can be used to compare the utility of different data systems. For example, Python pandas does not directly support theta join; only equi join. SQL supports most operations, but implements projection with the SELECT keyword (and selection with the WHERE keyword).</p>
<p>While we have defined relational algebra operations above using <em>set</em> relational algebra, in reality many data systems use a relational data model defined on <strong>bags</strong>, where both attributes and tuples are unordered collections that could contain duplicates.</p>
<p>Operations on bags are generally easier to implement than the equivalent operations on sets, because creating a bag does not involve the added step of checking for copies, or duplicate tuples. Further more, bags are meaningful depending on the data domain; in other words, it may be meaningful for a relation to contain multiple copies of the same tuple.</p>
<p>The below table is a brief comparison of bag RA and set RA operators. We define “# of occurrences” as the sum total of duplicate tuples in the output relation.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Operator</p></th>
<th class="head"><p>Bag operation</p></th>
<th class="head"><p>Performance compared to Set RA</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Selection</p></td>
<td><p>Preserve # of occurrences</p></td>
<td><p>Roughly as fast</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>Projection</p></td>
<td><p>Preserve #  of occurrences</p></td>
<td><p>Faster than set</p></td>
<td><p>SQL SELECT is a common operation</p></td>
</tr>
<tr class="row-even"><td><p>Product</p></td>
<td><p>Preserve # of occurrences</p></td>
<td><p>Roughly as fast</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>Union</p></td>
<td><p>Add # of occurrences</p></td>
<td><p>Faster than sets</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>Difference</p></td>
<td><p>Subtract # of occurrences</p></td>
<td><p>Roughly as fast</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>Renaming</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>Unchanged</p></td>
</tr>
</tbody>
</table>
</section>
<section id="references">
<h2><span class="section-number">2.1.8. </span>References<a class="headerlink" href="#references" title="Permalink to this heading">#</a></h2>
<p>[1] E. F. Codd. 1970. A relational model of data for large shared data banks. Communications of the ACM: 13 (6), 377–387. June 1970. <a class="reference external" href="https://doi.org/10.1145/362384.362685">https://doi.org/10.1145/362384.362685</a></p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./relational_algebra"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">2. </span>Relational Algebra</p>
      </div>
    </a>
    <a class="right-next"
       href="extended.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">2.2. </span>Extended RA Operators</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#set-relational-algebra">2.1.1. Set Relational Algebra</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#primitive-ra-operations">2.1.2. Primitive RA Operations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unary-operators-projection-selection-renaming">2.1.3. Unary Operators: Projection, Selection, Renaming</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#examples">2.1.3.1. Examples</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#binary-operators-cartesian-product-union-and-difference">2.1.4. Binary Operators: Cartesian Product, Union, and Difference</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#derived-operations">2.1.5. Derived Operations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#joins">2.1.6. Joins</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bag-relational-algebra">2.1.7. Bag Relational Algebra</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references">2.1.8. References</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Data 101 Staff
</p>

  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>